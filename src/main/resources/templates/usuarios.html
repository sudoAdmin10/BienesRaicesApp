<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Usuarios</title>
	<link rel="stylesheet" type="text/css" th:href="@{css/bootstrap5.2/bootstrap.min.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{css/fontawesome6.1.2/fontawesome.min.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{css/fontawesome6.1.2/solid.css}" />
	<script src="https://kit.fontawesome.com/c933420b11.js" crossorigin="anonymous"></script>
	<link rel="icon" type="image/x-icon" href="/img/xing.svg">
	<link rel="stylesheet" th:href="@{css/global.css}" />
	<link rel="stylesheet" th:href="@{css/usuarios.css}" />


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
	<script th:src="@{/js/sweetalert2.all.min.js}" type="text/javascript"></script>
	<script th:src="@{js/fontawesome6.1.2/fontawesome.min.js}" type="text/javascript"></script>
	<script th:src="@{js/fontawesome6.1.2/solid.js}" type="text/javascript"></script>
	<script th:src="@{js/fontawesome6.1.2/solid.js}" type="text/javascript"></script>
</head>

<body>

	<header class="header-navbar">
		<a href="/inicio"> <img class="logo-navbar" src="../img/xing.svg" alt="logo" href="/inicio"></a>
		<nav class="nav-links">
			<a href="/inicio"><button class="button-37" type="button">Inicio</button></a>
			<a th:href="@{/usuarios}"><button class="button-37" type="button">Usuarios</button></a>
			<a href="/nosotros"><button class="button-37" type="button">Nosotros</button></a>
			<a href="/propiedades"><button class="button-37" type="button">Propiedades</button></a>
		</nav>
		<a class="fp" href="/registrar"><button class="button-37" type="button">Registrate</button></a>
		<!-- <a class="btn btn-outline-light" th:href="@{/logout}" data-bs-toggle="tooltip" data-bs-placement="bottom"
            title="Cerrar sesión"><i class="fa-solid fa-arrow-right-from-bracket"></i></a> -->
	</header>

	<div class="container">

		<!-- <a th:href="@{/regresar}" class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="top"
			title="Nuevo">Regresar</a><br> -->
		<table class="table content-table">
			<thead>
				<tr>
					<th class="col-md-1">N°</th>
					<th class="col-md-3">Nombre</th>
					<th class="col-md-2">Activo</th>
					<th class="col-md-2">Agencia</th>
					<th class="col-md-2">Status</th>
					<th class="col-md-2">Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="decla, d : ${lista}">
					<td th:text="${d.index + 1}"></td>
					<td th:text="${decla.nombre}"></td>
					<td th:text="${decla.activo}"></td>
					<td th:text="${decla.agencia_id}"></td>
					<td th:text="${decla.status}"></td>
					<td align="center">
						<a th:href="@{/usuarios?id={id}(id=${decla.id})}" class="btn " data-toggle="tooltip"
							data-placement="top" title="Editar"><i class="fa-solid fa-pen-to-square"></i></a>
						<a th:href="@{/borrar?id={id}(id=${decla.id})}" class="btn " data-toggle="tooltip"
							data-placement="top" title="Borrar"><i class="fa-solid fa-trash"></i></a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="container">
		<table class="table content-table" th:action="@{/usuarios}">
			<thead>
				<tr>
					<th class="col-md-1">Agencias</th>
				</tr>
			</thead>
			<tbody>
				<tr th:object="${agencias}">
					<td th:field="*{nombre}"></td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="title" id="exampleModalLabel">Editar Usuario</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form th:action="@{/editarUsuario}" method="post" th:object="${tmp}">
					<input name="id" type="hidden" th:field="*{id}">
					<div class="modal-body">
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label input-label">Nombre:</label>
							<input name="nombre" type="text" class="form-control" th:field="*{nombre}">
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label input-label">Email:</label>
							<input name="email" type="text" class="form-control" th:field="*{email}">
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label input-label">Agencia:</label>
							<select name="agencia_id" id="agencia_id" th:field="*{agencia_id}"
								class="btn  dropdown-toggle form-control">
								<option value="1">RE Brokers Inmobiliaria</option>
								<option value="2">Grupo Esfera</option>
								<option value="3">Century 21</option>
								<option value="4">Rex-Max 501</option>
								<option value="5">TOI Asociados</option>
								<option value="6">Magna Obras</option>
							</select>
						</div>
						<div class="mb-3">
							<label for="recipient-name" class="col-form-label input-label">Password:</label>
							<input type="password" id="password" class="form-control" th:field="*{password}">
						</div>
					</div>
					<div class="modal-footer">
						<button th:action="@{/editarUsuario}" type="submit" class="button-37">Grabar</button>
					</div>
				</form>
			</div>
		</div>
	</div>



	<footer class="footter">
		<div class="footter-container">
			<div class="colum-icons ">
				<h4 style="color: #683c23;">Siguenos</h4>
				<div class="footter-icons d-flex justify-content-around">
					<i class="fab fa-facebook" style="color: #683c23;"></i>
					<i class="fab fa-twitter" style="color: #683c23;"></i>
					<i class="fab fa-instagram" style="color: #683c23;"></i>
					<i class="fa-brands fa-x-twitter " style="color: #683c23;"></i>
				</div>
				<p class="mb-4 f-light">&copy; 2024 Bienes Raíces KAMAZ. Todos los derechos reservados.</p>
			</div>
			<div class="colum-info">
				<h4 class="fw-bold" style="color: #683c23;">Conocenos en</h4>
				<p class="mb-1 f-light"><span class="fw-bold f-regular" style="color: #683c23;">CDMX:</span> WeWork,
					Miguel de Cervantes
					Saavedra 169, Granada, 11520, Miguel Hidalgo.</p>
				<p class="mb-1 f-light"><span class="fw-bold f-regular" style="color: #683c23;">Monterrey:</span>
					WeWork, Av. Constitución 2050
					Floor 38, 64000.</p>
				<p class="mb-4 f-light"><span class="fw-bold f-regular"
						style="color: #683c23;">Guadalajara:</span>11520, Miguel Hidalgo. Av.
					Constitución 2050, manzana 60</p>
				<p>
					<i class="fa-solid fa-phone"></i>
					<span class="fw-bold f-regular">+52 55 4163 5960</span>
				</p>
			</div>
			<div class="colum-img ">
				<img src="../img/img6.jpg" alt="">
			</div>
		</div>
	</footer>

	<script type="text/javascript" th:inline="javascript">
		var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
		var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
			return new bootstrap.Tooltip(tooltipTriggerEl)
		})

	</script>

	<script th:if="${showModal}" type="text/javascript" th:inline="javascript">
		var myModal = new bootstrap.Modal(document.getElementById("exampleModal"), {});
		document.onreadystatechange = function () {
			myModal.show();
		};

		function setTipo(agencia_id) {
			document.getElementById('agencia_id').value = agencia_id;
		}
	</script>


</body>

</html>